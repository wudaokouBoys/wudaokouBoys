
<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Video Player</title>
    <!-- Bootstrap -->
    <link rel="stylesheet" href="http://cdn.bootcss.com/bootstrap/3.3.4/css/bootstrap.min.css">
    <link href="http://vjs.zencdn.net/4.12/video-js.css" rel="stylesheet">
	<script src="http://libs.baidu.com/jquery/2.0.0/jquery.min.js"></script>
	<script src="http://libs.baidu.com/bootstrap/3.0.3/js/bootstrap.min.js"></script>
    <script src="http://vjs.zencdn.net/4.12/video.js"></script>
	<style>
		body {
			padding-top: 60px;
			padding-left: 50px;
			background:silver;
		}
		#banner-text { 
			width: 100%; 
			text-align:center;
			position:relative;
			font: 60px/1.1em 'opensans-bold', sans-serif;
			color: black;
			letter-spacing: -2px;
			margin: 0 auto 18px auto;
			text-shadow: 0px 1px 3px rgba(0, 0, 0, .8);
		}
		#wrap{white-space:normal; word-wrap:break-word;}
		*{
			padding: 0;
			margin: 0;
		}
		.back2top{
			position: fixed;
			bottom: 50px;
			right: 50px;
			width: 60px;
			height: 60px;
		}
		.back2top a{
			display: block;
			width: 100%;
		}
		.back2top a img{width: 100%;}
    </style>
	<!--[if lt IE 9]>
		<script src="http://apps.bdimg.com/libs/html5shiv/3.7/html5shiv.min.js"></script>
    <![endif]-->
</head>
<body>
	<div class="navbar navbar-fixed-top navbar-inverse" role="navigation">
	<!--导航栏-->
		<div class="container">
			<div class="navbar-header">
				<button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
					<span class="sr-only">Toggle navigation</span>
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
				</button>
				<div class="row" style="left:-20px; position: relative">
					<img src="/static/AsiaTube.png" class="img-rounded">
				</div>
			</div>
			<div class="collapse navbar-collapse">
			<ul class="nav navbar-nav">
				<li class="active"><a href="#"><span class="glyphicon glyphicon-home">Home</span></a></li>
				<li><a href = "#Game"><span class="glyphicon glyphicon-play">Game</span></a></li>
				<li><a href = "#Movie"><span class="glyphicon glyphicon-film">Movie</span></a></li>
				<li><a href = "#Sports"><span class="glyphicon glyphicon-star">Sports</span></a></li>
				<li><a href = "#Others"><span class="glyphicon glyphicon-plus">Others</span></a></li>
			</ul>
			<form class="navbar-form nav navbar-nav navbar-right" role="search">
				<div class="form-group">
					<li class="dropdown">
						<a href="#" class="dropdown-toggle" data-toggle="dropdown" style="height:44px"><span class="glyphicon glyphicon-user">User<b class="caret"></b></a>
						<ul class="dropdown-menu">
							<li><a href="#">Modify Info</a></li>
							<li><a href="#">Modify Password</a></li>
							<li class="divider"></li>
							<li><a href="#">Watch History</a></li>
							<li><a href="#">Upload History</a></li>
							<li class="divider"></li>
							<li style="display:{{Display}}"><a href="#">Verify User</a></li>
							<li style="display:{{Display}}"><a href="#">Verify Video</a></li>
							<li style="display:{{Display}}"><a href="#">Administer Type</a></li>
							<li class="divider" style="display:{{Display}}"></li>
							<li><a href="#">Log Out</a></li>
						</ul>
					</li>
				</div>
				<span class="label label-default">{{UserID}}</span>
			</form>  
			<form class="navbar-form navbar-right" role="search">
				<div class="form-group">
					<input type="text" class="form-control" placeholder="Search">
				</div>
				<button type="submit" class="btn btn-default">Search</button>
			</form>   
			</div><!-- /.nav-collapse -->
		</div><!-- /.container -->
    </div>
	<div class = "container" >
	<!--播放主界面-->
		<div class="row">
		<div class="col-lg-7">
		<!--视频标题-->
				<h3 class="text-center" id="banner-text">{{Video_title}}</h3>
		</div>
		<div class="col-lg-3" style="background:white; position:relative; border-radius:5px; height:90px; padding:6px;">
		<!--UP主信息-->	
				<div  style="width:100%">
					<div class="img-rounded">
						<img src="/static/{{UpperImage}}" style="width:80px; height:80px;">
					</div>
				</div>
				<div  style = "position: absolute; top :7px; left: 90px;">
					<h2>{{VideoUpper}}</h2>
				</div>
		</div>
		</div>
		<hr/>
		<div class="row">
		<div class="col-lg-7" style="height:525px;">
		<!--播放界面加弹幕输入-->
			<div class="row" style="width:100%;">
				<video id = "myvideo" width="652" height="489" controls="controls" preload="auto" >
                    <source src="/static/{{ Video_src }}">
                </video>
                <!--video id="MY_VIDEO_1" class="video-js vjs-default-skin" controls
 preload="auto" width="652" height="489" poster="MY_VIDEO_POSTER.jpg"
 data-setup="{}">
 <source src="/static/{{Video_src }}" type='video/mp4'>
 <p class="vjs-no-js">To view this video please enable JavaScript, and consider upgrading to a web browser that <a href="http://videojs.com/html5-video-support/" target="_blank">supports HTML5 video</a></p>
            </video-->
				<form class="input-group" method = POST role = "form" action="/videoPlayer/">
                    {% csrf_token %}
					<input id = "mybulletcontent" type="text" class="form-control">
						<span class="input-group-btn">
							<button id = "bscreengo" class="btn btn-default" type="button">
								Go!
							</button>
						</span>
				</form><!-- /input-group -->
			</div>
		</div>
		<div class="col-lg-3"  id="BulletScreen" style="height:525px; background:white; padding:10px; border-radius:5px; overflow:scroll; overflow-x:hidden">
		<!--弹幕列表栏-->
			<div class="panel panel-primary" >
   				<div class="panel-heading">
      				<h3 class="panel-title">BulletScreen</h3>
   				</div>
				<table class="table table-hover">
					<thead>
						<tr>
							<th>Time</th>
							<th>Comment</th>
						</tr>
					</thead>
					<tbody id = "bulletscreentable">
						{% for BulletScreen in BulletScreens %}
						<tr>
							<td>{{ BulletScreen.time }}</td>
							<td>{{ BulletScreen.content }}</td>
						</tr>
						{% endfor %}
					</tbody>
				</table>
			</div>
		</div>
		
		</div>
		<div class="row" style="background:white; padding:8px; border-radius:5px; position:relative; top: 20px; height: 200px; width:800px">
		<!--辅助功能栏-->	
			<form class="form-inline" role="form" style="padding: 5px; border-bottom-color: silver; border-bottom-style:solid;"  method = POST action="/videoPlayer/">
                {% csrf_token %}
				<button class="btn btn-primary btn-nm" type="button" id="like">
					<span class="glyphicon glyphicon-thumbs-up"></span>&nbsp;点赞
				</button>
				<div class="form-group" style="border-left-color:silver; border-right-color:silver; border-bottom-color:white; border-top-color:white; border-style:solid">
					<h4 id="likenum">&nbsp;获赞数：{{LikeNum}}&nbsp;</h4>
				</div>
				<div class="form-group" style="border-left-color:white; border-right-color:silver; border-bottom-color:white; border-top-color:white; border-style:solid">
					<h4>&nbsp;播放数：{{Playnum}}&nbsp;</h4>
				</div>
                <div class="form-group" style="border-left-color:white; border-right-color:silver; border-bottom-color:white; border-top-color:white; border-style:solid">
					<h4>&nbsp;上传时间:{{Video_uptime}}&nbsp;</h4>
				</div>
				<div class="form-group">
					<h4>&nbsp;视频类别:&nbsp;</h4>
				</div>
				<div class="form-group">
					&nbsp;&nbsp;<span class="label label-info">{{ videoType }}</span>
				</div>
			</form>
			<div id="wrap">
				<textarea name="VideoDiscribe" rows="5" disabled style="width:100%; background-color:white;">{{VideoDiscription}}</textarea>
			</div>
		</div>
		<div class="row" style="background:white; padding:8px; border-radius:5px; position:relative; top: 40px; height: 180px; width:800px">
		<!--输入评论-->
			<div class="col-lg-2" style="height:160px; padding:15px;">
				<div class="img-circle">
					<img src="{{UserImage}}" class="circle" style="width:80px; height:80px;">
				</div>
				<div style="top:20px;">
					<h4>{{UserID}}</h4>
				</div>
			</div>
			<div class="col-lg-10" style="height:160px; padding:15px;">
				<textarea name="VideoDiscribe" rows="5" placeholder="Please Enter Your Commit" style="width:100%;"></textarea>
				<button type="submit" class="btn btn-primary" style="float:right; position:relative; left:-10px;">Submit!</button>
			</div>
		</div>
		<div class="row" style="background:white; padding:8px; border-radius:5px; position:relative; top: 60px; height: 500px; width:800px; overflow:scroll; overflow-x:hidden;">
		<!--评论栏-->
			<div class="row" style="border-bottom-color:silver; border-bottom-style:solid; height:180px; padding:px;">
				<div class="col-lg-2" style="height:160px; padding:15px; left:15px;">
					<div class="img-circle">
						<img src="{{Cmt1Image}}" class="circle" style="width:80px; height:80px;">
					</div>
					<div style="top:20px;">
						<h4>{{Cmt1ID}}</h4>
					</div>
				</div>
				<div class="col-lg-10" style="height:160px; padding:15px;">
					<textarea name="VideoDiscribe" rows="5" disabled style="width:100%; background-color:white;">1</textarea>
					<p>#{{Cmt1Layer}}&nbsp;&nbsp;&nbsp;&nbsp;{{Cmt1Time}}</p>
				</div>
			</div>
			<div class="row" style="border-bottom-color:silver; border-bottom-style:solid; height:180px; padding:px;">
				<div class="col-lg-2" style="height:160px; padding:15px; left:15px;">
					<div class="img-circle">
						<img src="{{Cmt2Image}}" class="circle" style="width:80px; height:80px;">
					</div>
					<div style="top:20px;">
						<h4>{{Cmt2ID}}</h4>
					</div>
				</div>
				<div class="col-lg-10" style="height:160px; padding:15px;">
					<textarea name="VideoDiscribe" rows="5" disabled style="width:100%; background-color:white;">2</textarea>
					<p>#{{Cmt2Layer}}&nbsp;&nbsp;&nbsp;&nbsp;{{Cmt2Time}}</p>
				</div>
			</div>
			<div class="row" style="border-bottom-color:silver; border-bottom-style:solid; height:180px; padding:px;">
				<div class="col-lg-2" style="height:160px; padding:15px; left:15px;">
					<div class="img-circle">
						<img src="{{Cmt3Image}}" class="circle" style="width:80px; height:80px;">
					</div>
					<div style="top:20px;">
						<h4>{{Cmt3ID}}</h4>
					</div>
				</div>
				<div class="col-lg-10" style="height:160px; padding:15px;">
					<textarea name="VideoDiscribe" rows="5" disabled style="width:100%; background-color:white;">3</textarea>
					<p>#{{Cmt3Layer}}&nbsp;&nbsp;&nbsp;&nbsp;{{Cmt3Time}}</p>
				</div>
			</div>
			<div class="row" style="border-bottom-color:silver; border-bottom-style:solid; height:180px; padding:px;">
				<div class="col-lg-2" style="height:160px; padding:15px; left:15px;">
					<div class="img-circle">
						<img src="{{Cmt4Image}}" class="circle" style="width:80px; height:80px;">
					</div>
					<div style="top:20px;">
						<h4>{{Cmt4ID}}</h4>
					</div>
				</div>
				<div class="col-lg-10" style="height:160px; padding:15px;">
					<textarea name="VideoDiscribe" rows="5" disabled style="width:100%; background-color:white;">4</textarea>
					<p>#{{Cmt4Layer}}&nbsp;&nbsp;&nbsp;&nbsp;{{Cmt4Time}}</p>
				</div>
			</div>
		</div>
	</div>
	<div class="back2top" >
        <a href="javascript:;">
            <img src="/static/back2top.jpg" alt="">
        </a>
	</div>
</object>
<script>
    $('#like').click(function(){
        $.ajax({
            url:'/videoPlayer/',
            type : "POST",
            dataType: "json",
            data : {
                likeit:true,
                csrfmiddlewaretoken: '{{ csrf_token }}'
                },
            success : function(json) {
                $('#likenum').html('&nbsp获赞数：'+ json.likenum + '&nbsp')
                $('#like').attr('class', $('#like').attr('class') + ' disabled btn-success')
            },
            error : function(xhr,errmsg,err) {
                alert(xhr.status + ": " + xhr.responseText);
            }
        })
    })
</script>

<script>

    $('#bscreengo').click(function(){
        $.ajax({
            url:'/videoPlayer/',
            type : "POST",
            dataType: "json",
            data : {
                bullettime:document.getElementById('myvideo').currenttime+"",
                bulletcontent:$("#mybulletcontent").val(),
                csrfmiddlewaretoken: '{{ csrf_token }}'
                },
            success : function(json) {
                alert("收到弹幕列表")
                alert(json)
                console.log(json)
                var a = document.getElementById('bulletscreentable')
                for (i in json){
                    a.innerHTML += "<tr><td>"+i.time+"</td><td>"+i.content+"</td> </tr>"
                }
            },
            error : function(xhr,errmsg,err) {
                alert(xhr.status + ": " + xhr.responseText);
            }
        })
    })
</script>

</body>
<script type="text/javascript" language="javascript">
	jQuery(document).ready(function($) {
	// 回到顶部
        $('.back2top').hide();
        
        $(window).scroll(function() {
            if($(window).scrollTop()>100){
                $('.back2top').fadeIn(1500);
            }else{
                $('.back2top').fadeOut(1500);
            }
        });
        $('.back2top a').click(function() {
            $('body,html').animate({scrollTop: 0}, 800);
            return false;
        });
	});
</script>
</html>